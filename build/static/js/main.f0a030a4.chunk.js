(this.webpackJsonpreactchat=this.webpackJsonpreactchat||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a(27),n=a.n(c),r=a(24),l=a(20),i=a(13),o=a.n(i),m=a(2),d=function(e){var t=e.message,a=!1;return t.attachments&&t.attachments.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{src:t.attachments[0].file,alt:"message-attachment",className:"message-image",style:{float:"right"}}),Object(m.jsx)("span",{style:{fontSize:"10px",float:"right",marginRight:"10px"},children:a?o()(t.created).calendar():o()(t.created).format("MMMM Do YYYY, h:mm a")})]}):(a=o()(t.created).format("MMMM DO YYYY")===o()().format("MMMM DO YYYY"),Object(m.jsxs)("div",{className:"message",style:{float:"right",marginRight:"18px",color:"white",backgroundColor:"#3B2A50"},children:[Object(m.jsxs)("span",{style:{fontSize:"18px"},children:[" ",t.text," "]}),Object(m.jsx)("span",{style:{fontSize:"10px",display:"block",marginTop:"2px"},children:a?o()(t.created).calendar():o()(t.created).format("MMMM Do YYYY, h:mm a")})]}))},j=a(17),u=a(113),b=a(114),p=a(115),h=(a(106),a(56)),g=void 0,x=function(e){var t=Object(s.useState)([]),a=Object(j.a)(t,2),c=a[0],n=a[1],r=Object(s.useState)(!1),i=Object(j.a)(r,2),o=i[0],d=i[1],x=e.chatID,O=e.creds,f=(e.chats,e.userName,function(e){e.preventDefault();var t=c.trim();t.length>0&&Object(l.n)(O,x,{text:t}),n(""),d(!1)}),v=function(e){Object(l.n)(O,x,{files:e.target.files,text:""})};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{className:"message-form",onSubmit:f,children:[Object(m.jsx)("input",{className:"message-input",placeholder:"Send a message...",value:c,onChange:function(t){n(t.target.value),Object(l.k)(e,x),console.log(c)},onSubmit:f}),Object(m.jsx)("label",{htmlFor:"upload-button",children:Object(m.jsx)("span",{className:"image-button",children:Object(m.jsx)(u.a,{className:"picture-icon"})})}),Object(m.jsx)("input",{type:"file",multiple:!1,id:"upload-button",style:{display:"none"},onChange:v.bind(g)}),Object(m.jsx)("label",{htmlFor:"emoji-button",onClick:function(){d(!1===o)},children:Object(m.jsx)("span",{className:"image-button",children:Object(m.jsx)(b.a,{className:"picture-icon"})})}),Object(m.jsx)("input",{type:"text",multiple:!1,id:"emoji-button",style:{display:"none"},value:c,onChange:v.bind(g)}),Object(m.jsx)("button",{type:"submit",className:"send-button",children:Object(m.jsx)(p.a,{className:"send-icon"})})]}),Object(m.jsx)("span",{style:{display:o?"block":"none"},id:"message",children:Object(m.jsx)(h.a,{onSelect:function(e){var t=e.native;n(t)},style:{width:"100%"}})})]})},O=function(e){var t,a=e.lastMessage,s=e.message,c=!1;c=o()(s.created).format("MMMM DO YYYY")===o()().format("MMMM DO YYYY");var n=!a||a.sender.username!==s.sender.username;return Object(m.jsxs)("div",{className:"message-row",children:[n&&Object(m.jsx)("div",{className:"message-avatar",style:{backgroundImage:s.sender&&"url(".concat(null===s||void 0===s||null===(t=s.sender)||void 0===t?void 0:t.avatar,")")}}),s.attachments&&s.attachments.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{src:s.attachments[0].file,alt:"message-attachement",className:"message-image",style:{marginLeft:n?"4px":"48px"}}),Object(m.jsx)("span",{style:{fontSize:"10px",display:"block"},children:c?o()(s.created).calendar():o()(s.created).format("MMMM Do YYYY, h:mm a")})]}):Object(m.jsxs)("div",{className:"message",style:{float:"left",marginLeft:n?"4px":"48px",backgroundColor:"#CABCDC"},children:[Object(m.jsxs)("span",{style:{fontSize:"18px"},children:[" ",s.text," "]}),Object(m.jsx)("span",{style:{fontSize:"10px",display:"block",marginTop:"8px"},children:c?o()(s.created).calendar():o()(s.created).format("MMMM Do YYYY, h:mm a")})]})]})},f=(a(108),a(28)),v=function(e){Object(s.useEffect)((function(){t()}));var t=function(){f.animateScroll.scrollToBottom({containerId:"message"})};console.log(e);var a=e.chats,c=e.activeChat,n=e.userName,l=e.messages,i=a&&a[c],o=function(e,t){return i.people.map((function(a,s){var c;return a.last_read===e.id&&Object(m.jsx)("div",{className:"read-receipt",style:{float:t?"right":"left",backgroundImage:"url(".concat(null===a||void 0===a||null===(c=a.person)||void 0===c?void 0:c.avatar,")")}},"read_".concat(s))}))};return i?Object(m.jsxs)("div",{className:"chat-feed",children:[Object(m.jsxs)("div",{className:"chat-title-container",children:[Object(m.jsx)("div",{className:"chat-title",children:null===i||void 0===i?void 0:i.title}),Object(m.jsxs)("div",{className:"logo",children:[Object(m.jsx)("span",{style:{fontSize:"10px",marginLeft:"10px"},children:a[c].people.map((function(e){if(e.person.username===n)return Object(m.jsx)("img",{src:e.person.avatar,style:{height:"50px",width:"50px",borderRadius:"50%",float:"right"}})}))}),Object(m.jsx)("button",{onClick:function(){localStorage.removeItem("username"),localStorage.removeItem("password"),window.location.reload()},className:"btn_logout",children:"Logout"})]}),Object(m.jsx)("div",{className:"chat-subtitle",children:"Users in the room: \n                         ".concat(null===i||void 0===i?void 0:i.people.map((function(e){return" ".concat(e.person.username===a[c].admin.username?"".concat(e.person.username," (Admin)"):"".concat(e.person.username)," ")})))})]}),function(){var e=Object.keys(l);return e.map((function(t,a){var s=l[t],c=0===a?null:e[a-1],r=n===s.sender.username;return Object(m.jsxs)("div",{style:{width:"100%"},children:[Object(m.jsx)("div",{className:"message-block",children:r?Object(m.jsx)(d,{message:s}):Object(m.jsx)(O,{message:s,lastMessage:l[c]})}),Object(m.jsx)("div",{className:"read-receipts",style:{marginRight:r?"18px":"0px",marginLeft:r?"0px":"68px"},children:o(s,r)})]},"msg_".concat(a))}))}(),Object(m.jsx)("div",{style:{height:"100px"}}),Object(m.jsx)("div",{className:"message-form-container",id:"message",children:Object(m.jsx)(x,Object(r.a)(Object(r.a)({},e),{},{chatID:c}))})]}):"Loading..."},N=(a(109),a(16)),y=a(36),M=a.n(y),Y=a(55),S=a(11),w=a.n(S),k=a(116),C=function(){var e,t=Object(s.useState)(""),a=Object(j.a)(t,2),c=a[0],n=a[1],r=Object(s.useState)(""),l=Object(j.a)(r,2),i=l[0],o=l[1],d=Object(s.useState)(""),u=Object(j.a)(d,2),b=u[0],p=u[1],h=function(){var e=Object(Y.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={"Project-ID":"9fdbbf6c-d615-4a3c-a1cd-e28627cefc77","User-Name":c,"User-Secret":i},e.prev=2,e.next=5,w.a.get("https://api.chatengine.io/chats",{headers:a});case 5:localStorage.setItem("username",c),localStorage.setItem("password",i),window.location.reload(),p(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),p("Oops, incorrect credentials.");case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"wrapper",children:Object(m.jsxs)("div",{className:"form",children:[Object(m.jsx)("h1",{className:"title",children:"React Chat App"}),Object(m.jsx)(k.a,{style:{fontSize:"50px",color:"white"}}),Object(m.jsxs)("form",{onSubmit:h,children:[Object(m.jsx)("input",Object(N.a)({type:"text",value:c,onChange:function(e){return n(e.target.value)},className:"input",placeholder:"Username",required:!0},"className","input")),Object(m.jsx)("input",Object(N.a)({type:"password",value:i,onChange:function(e){return o(e.target.value)},className:"input",placeholder:"Password",required:!0},"className","input")),Object(m.jsx)("div",{align:"center",children:Object(m.jsx)("button",(e={type:"submit",className:"button"},Object(N.a)(e,"className","input1"),Object(N.a)(e,"children","Login"),e))})]}),Object(m.jsx)("h1",{className:"error",children:b})]})})},D=function(){return localStorage.getItem("username")?Object(m.jsx)(l.c,{height:"100vh",projectID:"9fdbbf6c-d615-4a3c-a1cd-e28627cefc77",userName:localStorage.getItem("username"),userSecret:localStorage.getItem("password"),renderChatFeed:function(e){return Object(m.jsx)(v,Object(r.a)({},e))}}):Object(m.jsx)(C,{})};n.a.render(Object(m.jsx)(D,{}),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.f0a030a4.chunk.js.map